/* ================= DASHBOARD (condensed) ================= */

/* tokens */
:root{
  --brand-purple:#353468; --ink:var(--brand-purple); --muted:#6b7280;
  --line:#dcd9e8; --soft:#f5f4fa;
  --icon-info:#2563eb; --icon-success:#16a34a; --icon-warn:#f59e0b;
  --icon-danger:#dc2626; --icon-money:#059669; --icon-neutral:#6b7280;
}

/* base */
main{background:transparent!important;width:100%;margin:0!important;}
body#dashboardbody{background:linear-gradient(180deg,#f9fbff 0%,#f5f7fb 100%);color:var(--ink);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;}
html,body{max-width:100%;overflow-x:hidden;}
*,*::before,*::after{box-sizing:border-box;}
.dash-wrap{max-width:1100px;margin:24px auto 64px;padding:0 16px;}
.dash-title,.snapshot-head h3{margin:0 0 14px!important;font-size:clamp(22px,2.8vw,34px);color:var(--ink);font-weight:800;}
.dash-header-row{display:flex;align-items:center;justify-content:space-between;gap:16px;margin:6px 0 14px;}

/* folder tabs (rounded + sheen, less pink, softer borders) */
.folder-tabs .tablist{display:flex;align-items:flex-end;flex-wrap:wrap;gap:8px;padding:8px 8px 0;background:rgba(53,52,104,.08);border-radius:14px 14px 0 0;border-bottom:1px solid var(--line);overflow:visible;}
.folder-tabs .tab{appearance:none;cursor:pointer;margin:0;white-space:nowrap;transition:background .15s,color .15s,box-shadow .15s;
  border:1px solid var(--line);border-bottom:none;border-radius:999px;padding:10px 14px;font-weight:700;
  background:rgba(255,255,255,.65);color:var(--muted);box-shadow:0 4px 14px rgba(37,36,80,.06);}
.folder-tabs .tab:hover{background:var(--soft);color:var(--ink);}
.folder-tabs .tab.is-active{background:#fff;color:var(--brand-purple);box-shadow:0 10px 26px rgba(37,36,80,.10);position:relative;top:1px;}
.folder-tabs .panels{border:1px solid var(--line);border-top:none;border-radius:0 0 14px 14px;
  background:radial-gradient(circle at top left,rgba(53,52,104,.10) 0,#fff 58%);
  box-shadow:0 10px 30px rgba(37,36,80,.10);padding:16px;}
.panel{display:none;} .panel.is-active{display:block;background:transparent;}

/* cards + stats + tables (no harsh purple borders) */
.card-grid{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));}
.card{padding:18px;background:#fff;border:1px solid var(--line)!important;border-radius:12px!important;box-shadow:0 4px 14px rgba(37,36,80,.06)!important;}
.card h3{margin:0 0 10px;color:var(--ink);} .card p{margin:0 0 12px;color:#5f6472;}
.card-link{color:#1e6fff;text-decoration:none;font-weight:700;} .card-link:hover{text-decoration:underline;}

.lead-toolbar{display:flex;justify-content:space-between;align-items:center;gap:12px;margin-bottom:14px;}
.lead-toolbar .scope label{margin-right:12px;color:#444;cursor:pointer;}
.lead-toolbar .range select{border:1px solid var(--line);background:#fff;padding:6px 10px;border-radius:10px;}

.lead-stats,.snapshot-grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fit,minmax(170px,1fr));margin-bottom:14px;}
.stat{padding:14px;border:1px solid var(--line)!important;border-radius:12px;background:radial-gradient(circle at top left,rgba(53,52,104,.10) 0,#fff 60%)!important;box-shadow:0 4px 14px rgba(37,36,80,.06);}
.stat-top{display:flex;align-items:center;gap:8px;color:#5f6472;font-weight:700;}
.stat .num{margin-top:6px;font-weight:900;font-size:1.6rem;color:var(--ink);} .stat .num.bad{color:#b00020;}
.stat .stat-top i{min-width:18px;text-align:center;}

.mini h4,.lead-mini h3{margin:10px 0;color:var(--ink);}
.mini-table{width:100%;border-collapse:collapse;border:1px solid var(--line)!important;border-radius:12px;overflow:hidden;background:#fff;}
.mini-table th{background:var(--soft)!important;color:#1d2433!important;font-weight:700;border-bottom:1px solid var(--line)!important;padding:8px;text-align:left;}
.mini-table td{padding:8px;text-align:left;border-bottom:1px solid rgba(220,217,232,.75);white-space:nowrap;}
.mini-table tbody tr:nth-child(even){background:#fbfdff;}
.mini-table tbody tr:last-child td{border-bottom:none;}

.snapshot-actions{margin-top:12px;display:flex;justify-content:flex-end;}
.btn-link{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--line);background:#fff;color:#1e6fff;text-decoration:none;padding:8px 12px;font-weight:700;border-radius:10px;}
.btn-link:hover{background:var(--soft);}

main>section.card.stay-white{max-width:1100px;margin:0 auto 32px;padding:0 16px 24px;border:none!important;box-shadow:none!important;background:transparent!important;}

/* carousel */
.carousel{position:relative;background:#fff;border:1px solid var(--line)!important;border-radius:12px;overflow:hidden;box-shadow:0 4px 14px rgba(37,36,80,.06);}
.carousel-track{display:flex;scroll-behavior:smooth;touch-action:pan-y;will-change:transform;transition:transform .3s ease;}
.slide{flex:0 0 100%;padding:16px;border-right:.5px solid #eef0f6;box-sizing:border-box;}
.slide:last-child{border-right:none;}
.slide h3{margin:0 0 8px;color:var(--ink);font-weight:800;} .slide p{margin:0;color:#5f6472;}
.car-btn{position:absolute;top:50%;transform:translateY(-50%);border:0;width:36px;height:36px;display:grid;place-items:center;cursor:pointer;border-radius:999px;background:rgba(255,255,255,.75);box-shadow:0 6px 18px rgba(37,36,80,.10);}
.car-btn:hover{background:rgba(255,255,255,.92);} .car-btn.prev{left:8px;} .car-btn.next{right:8px;}
.car-dots{display:flex;gap:6px;justify-content:center;padding:10px 8px 0;align-items:center;}
.car-dots button{width:8px;height:8px;padding:0;line-height:0;border-radius:50%;border:0;background:#cdd3e1;cursor:pointer;display:block;}
.car-dots button[aria-current="true"]{background:#6f7aa3;}
.car-footer{display:flex;justify-content:flex-end;padding:8px;border-top:1px solid var(--line);}
.see-all{border:1px solid var(--line);background:#fff;padding:6px 10px;cursor:pointer;border-radius:10px;}
.see-all:hover{background:var(--soft);}

/* overlay */
.overlay{position:fixed;inset:0;z-index:1200;display:none;} .overlay.open{display:block;}
.overlay-backdrop{position:absolute;inset:0;background:rgba(0,0,0,.45);}
.overlay-panel{position:relative;margin:5vh auto 0;max-width:980px;background:#fff;border:1px solid var(--line)!important;border-radius:14px;overflow:hidden;box-shadow:0 20px 55px rgba(0,0,0,.25);}
.overlay-header{display:flex;justify-content:space-between;align-items:center;padding:12px 14px;background:var(--soft);border-bottom:1px solid var(--line);}
.overlay-header h2{margin:0;color:var(--ink);}
.overlay-close{background:transparent;border:0;font-size:24px;cursor:pointer;}
.overlay-body{padding:12px 14px 18px;}
.overlay-grid{display:grid;gap:12px;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));}
.overlay-item{border:1px solid var(--line);padding:12px;background:#fff;cursor:pointer;border-radius:12px;box-shadow:0 4px 14px rgba(37,36,80,.06);}
.overlay-item:hover{background:#f8faff;}

/* announcements + tasks (shared) */
.slide.annc,.slide.task{padding:0;}
.annc-inner,.task-inner{display:grid;grid-template-columns:1fr 3fr;min-height:220px;}
.annc-text,.task-text{padding:16px;display:flex;flex-direction:column;gap:8px;}
.annc-text h3,.task-text h3{margin:0;color:var(--ink);font-weight:800;}
.annc-text p,.task-text p{margin:0;color:#5f6472;}
.annc-img,.task-img{position:relative;overflow:hidden;background:#fff;}
.annc-img img{position:absolute;inset:0;width:100%;height:100%;object-fit:cover;object-position:center;}
.task-img .task-hero{position:absolute;inset:0;width:100%;height:100%;background-size:cover;background-position:center;}
.overlay-item .overlay-thumb{width:100%;max-height:160px;overflow:hidden;border-radius:8px;margin-bottom:8px;}
.overlay-item .overlay-thumb img{width:100%;height:100%;object-fit:cover;display:block;}
.overlay-item.image-card{position:relative;color:#fff;min-height:160px;display:flex;align-items:flex-end;padding:12px;background-size:cover;background-position:center;background-repeat:no-repeat;}
.overlay-item.image-card::before{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(53,52,104,0) 0%,rgba(53,52,104,1) 100%);}
.overlay-item.image-card .card-content{position:relative;z-index:2;width:100%;}
.overlay-item.image-card h3{margin:0 0 6px;color:#fff;text-shadow:0 2px 6px rgba(0,0,0,.35);}
.overlay-item.image-card p{margin:0 0 10px;color:#f3f4fa;text-shadow:0 2px 6px rgba(0,0,0,.25);}
.mini-actions{display:flex;gap:8px;}
.icon-btn{display:inline-flex;align-items:center;justify-content:center;gap:6px;border:1px solid rgba(255,255,255,.85);background:rgba(0,0,0,.18);color:#fff;padding:6px 10px;cursor:pointer;text-decoration:none;font-weight:700;border-radius:10px;}
.icon-btn:hover{background:rgba(0,0,0,.28);} .icon-btn i{min-width:14px;text-align:center;}
.overlay-panel.annc-detail{max-width:860px;}
.annc-detail-body,.task-detail-body{display:grid;grid-template-columns:1fr 1.2fr;gap:14px;}
.annc-detail-body .hero,.task-detail-body .hero.task-hero{background:#eef1f8;min-height:260px;background-size:cover;background-position:center;}
.annc-detail-body .meta h3,.task-detail-body .meta h3{margin:0 0 8px;color:var(--ink);}
.annc-detail-body .meta p,.task-detail-body .meta p{margin:0 0 8px;color:#444;}
.annc-detail-body .meta .row,.task-detail-body .meta .row{margin-top:6px;color:#555;font-size:14px;}
.annc-detail-body .cta{margin-top:12px;display:inline-flex;gap:10px;}
.annc-detail-body .cta a{border:1px solid var(--line);background:#fff;padding:8px 12px;color:#1e6fff;text-decoration:none;font-weight:700;border-radius:10px;}
.annc-detail-body .cta a:hover{background:var(--soft);}
.task-detail-body .task-notes{margin-top:10px;line-height:1.5;}

/* compliance + PI lock (deduped) */
.license-list{display:flex;flex-direction:column;gap:10px;}
.license-block{background:#fff;padding:10px 12px;border:1px solid var(--line);border-radius:12px;box-shadow:0 4px 14px rgba(37,36,80,.06);}
.license-header{display:flex;justify-content:space-between;align-items:center;margin-bottom:4px;font-weight:700;color:var(--ink);}
.license-title{font-size:.95rem;}
.license-status{font-size:.8rem;padding:2px 8px;border-radius:999px;border:1px solid #bbb;}
.license-status.active{background:#e6f6ea;border-color:#4caf50;color:#256029;}
.license-status.inactive{background:#fbeaea;border-color:#d32f2f;color:#7f1d1d;}
.license-meta{font-size:.85rem;color:#555;display:flex;flex-wrap:wrap;gap:6px 16px;margin-bottom:6px;}
.license-loas{display:flex;flex-wrap:wrap;gap:6px;}
.license-chip{font-size:.8rem;padding:3px 8px;border-radius:999px;background:var(--soft);color:#333;}

#pi-section{position:relative;min-height:360px;margin-bottom:40px;}
#pi-content{filter:none;pointer-events:auto;transition:filter .2s ease;}
#pi-content.pi-locked{filter:blur(4px);pointer-events:none;}
#pi-lock-card{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:20;width:min(420px,90vw);
  padding:18px 20px 16px;background:#fff;border:1px solid var(--line);border-radius:14px;box-shadow:0 14px 32px rgba(0,0,0,.18);display:flex;flex-direction:column;gap:10px;}
#pi-lock-card h3{margin:0 0 6px;text-align:center;font-size:1.1rem;color:var(--ink);}
#pi-lock-card input{width:100%;box-sizing:border-box;border:1px solid var(--line);border-radius:10px;padding:8px 10px;font-size:14px;}
#pi-lock-card button,.pi-btn{border:1px solid var(--line);background:#fff;color:var(--ink);font-weight:700;padding:8px 12px;cursor:pointer;border-radius:10px;transition:background .15s,transform .1s;}
#pi-lock-card button:hover,.pi-btn:hover{background:var(--soft);transform:translateY(-1px);}
.pi-field-row{display:flex;flex-direction:column;gap:4px;margin:10px 0;}
.pi-field-row input{border:1px solid var(--line);border-radius:10px;padding:6px 8px;font-size:14px;}
.pi-btn.primary{background:var(--brand-purple);border-color:var(--brand-purple);color:#fff;}
.pi-btn.primary:hover{background:#242247;}
#pi-email-row,#pi-code-row{display:flex;gap:8px;flex-wrap:wrap;}
#pi-email-row input,#pi-code-row input{flex:1 1 150px;}
#pi-email-row button,#pi-code-row button{flex:0 0 auto;white-space:nowrap;}
#pi-lock-status{margin-top:6px;font-size:13px;text-align:center;}
.muted{color:var(--muted);font-size:.9rem;}

/* availability toggle */
.availability-toggle{display:inline-flex;align-items:center;gap:10px;margin-top:15px;font-weight:700;}
.switch{position:relative;display:inline-block;width:50px;height:28px;}
.switch input{opacity:0;width:0;height:0;}
.slider{position:absolute;cursor:pointer;inset:0;background:#ccc;transition:.4s;border-radius:34px;}
.slider::before{content:"";position:absolute;height:20px;width:20px;left:4px;bottom:4px;background:#fff;transition:.4s;border-radius:50%;}
input:checked + .slider{background:#4caf50;}
input:checked + .slider::before{transform:translateX(22px);}
#availabilityStatus{font-weight:bold;color:#555;}

/* icon colors */
#tab-announcements .icon{color:var(--icon-info);}
#tab-sales .icon{color:var(--icon-money);}
#tab-reminders .icon{color:var(--icon-warn);}
#tab-compliance .icon{color:var(--icon-info);}
#tab-banking .icon{color:var(--icon-money);}
#tab-docs .icon{color:var(--icon-neutral);}
#tab-carriers .icon{color:var(--brand-purple);}
.carousel .car-btn i{color:var(--icon-neutral);}
.lead-stats [data-key="new"] .stat-top i{color:#a855f7;}
.lead-stats [data-key="contacted"] .stat-top i{color:var(--icon-info);}
.lead-stats [data-key="quoted"] .stat-top i{color:var(--icon-warn);}
.lead-stats [data-key="closed"] .stat-top i{color:var(--icon-success);}
.snapshot-actions .btn-link i{color:var(--icon-info);}
main>section.card.stay-white:nth-of-type(3) .snapshot-grid .stat:nth-child(1) .stat-top i,
main>section.card.stay-white:nth-of-type(3) .snapshot-grid .stat:nth-child(2) .stat-top i{color:var(--icon-money);}
main>section.card.stay-white:nth-of-type(3) .snapshot-grid .stat:nth-child(3) .stat-top i{color:var(--icon-warn);}
main>section.card.stay-white:nth-of-type(3) .snapshot-grid .stat:nth-child(4) .stat-top i{color:var(--icon-danger);}
main>section.card.stay-white:nth-of-type(4) .snapshot-grid .stat:nth-child(1) .stat-top i{color:var(--icon-info);}
main>section.card.stay-white:nth-of-type(4) .snapshot-grid .stat:nth-child(2) .stat-top i{color:var(--icon-success);}
main>section.card.stay-white:nth-of-type(4) .snapshot-grid .stat:nth-child(3) .stat-top i{color:#a855f7;}
main>section.card.stay-white:nth-of-type(4) .snapshot-grid .stat:nth-child(4) .stat-top i{color:var(--icon-warn);}

/* responsive */
@media (max-width:720px){
  .car-btn{display:none;}
  .overlay-panel{margin:0;height:100vh;max-width:none;border-radius:0;}
  .overlay-body{height:calc(100vh - 52px);overflow:auto;}
  .annc-inner,.task-inner{grid-template-columns:1fr;}
  .annc-img,.task-img{height:180px;}
  .annc-detail-body,.task-detail-body{grid-template-columns:1fr;}
  .annc-detail-body .hero,.task-detail-body .hero.task-hero{min-height:200px;}
}
@media (max-width:640px){
  .folder-tabs .tablist{gap:0;}
  .folder-tabs .tab{padding:8px 10px;font-size:0;}
  .folder-tabs .tab + .tab{margin-left:-6px;}
  .folder-tabs .tab .icon{font-size:18px;line-height:1;vertical-align:middle;display:inline-block;}
  .folder-tabs .tab .label{display:none;}
}
