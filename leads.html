<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="apple-touch-icon" href="/apple-touch-icon.png">
	    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	    <link rel="manifest" href="/site.webmanifest">
		<title>Leads | Family Values Group</title>
		<link rel="stylesheet" href="styles/agentstyle.css" />
		<link rel="stylesheet" href="styles/leads.css" />
		<link href="https://fonts.googleapis.com/css?family=Bellota+Text" rel="stylesheet" />
		<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/choices.js/public/assets/styles/choices.min.css" />
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css" />
	</head>

	<body id="dashboardbody">
		<header class="index-grid-header">
			<div id="logofvcontainer">
				<div id="logodiv">
					<a href="../index.html"><img id="headerlogo" src="../Pics/img17.png" alt="FVIA Logo" /></a>
				</div>
				<div id="fvdiv">
					<p><strong>Family Values Group</strong></p>
				</div>
			</div>
			<div id="navcontainer">
				<nav class="header-flex-container">
					<a id="notifications-tab" href="notifications.html"><i class="fa-solid fa-bell"></i></a>
					<a id="profile-tab" href="profile.html"><i class="fa-solid fa-user"></i></a>
					<div id="menu-toggle">
						<i class="fa-solid fa-bars"></i>
					</div>
				</nav>
			</div>
		</header>
		
		<!-- Mobile Menu -->
		<div id="mobile-menu">
			<a href="dashboard.html"><i class="fa-solid fa-gauge"></i><p>Dashboard</p></a>
			<button id="toolkit-toggle" class="menu-item" aria-expanded="false" aria-controls="toolkit-submenu">
				<i class="fa-solid fa-toolbox"></i><span>Toolkit</span>
				<i class="fa-solid fa-chevron-down caret" aria-hidden="true"></i>
			</button>
			<div id="toolkit-submenu" class="submenu" hidden>
				<a href="leads.html"><i class="fa-solid fa-address-book"></i><span>Leads</span></a>
				<!--<a href="maps.html"><i class="fa-solid fa-route"></i><span>Routing</span></a>
				<a href="scheduling.html"><i class="fa-solid fa-calendar-check"></i><span>Scheduling</span></a>
				<a href="calculator.html"><i class="fa-solid fa-calculator"></i><span>Calculator</span></a>
				<a href="marketing.html"><i class="fa-solid fa-handshake"></i><span>Marketing</span></a>-->
			</div>
			<a href="commissions.html"><i class="fa-solid fa-dollar-sign"></i><p>Commissions</p></a>
			<!--<a href="training.html"><i class="fa-solid fa-chalkboard-teacher"></i><p>Training</p></a>-->
			<a href="recruiting.html"><i class="fa-solid fa-user-plus"></i><p>Recruiting</p></a>
			<!--<a href="messages.html"><i class="fa-solid fa-envelope"></i><p>Messages</p></a>-->
			<a href="admin.html" class="admin-link admin-hidden" data-admin-link>
		        <i class="fa-solid fa-user-shield"></i><p>Admin</p>
		      </a>
		</div>
			
		<main class="auth-container">
			<div class="lead-tabs">
				<button id="nav-view"    class="tab-button">View</button>
				<button id="nav-submit"  class="tab-button">Submit</button>
				<button id="nav-request" class="tab-button">Request</button>
				<button id="nav-contacts" class="tab-button">Contacts</button>
				<button id="nav-dnc" class="tab-button">DNC List</button>
			</div>
	
			<section id="contacts-section" class="lead-section" style="display:none;">
				<h3>Contacts</h3>
				<div class="card" style="margin-bottom:12px;">
					<div style="display:flex;align-items:center;gap:10px;flex-wrap:wrap;">
						<button id="contacts-select-toggle" class="see-all" title="Toggle selection mode">
							<i class="fa-regular fa-square-check"></i> Select
						</button>
						<button id="contacts-select-all" class="see-all" style="display:none;">
							<i class="fa-solid fa-check-double"></i> Select All
						</button>
						<input id="contacts-search" type="search" placeholder="Search name, phone, email…" style="padding:8px;border:1px solid #d6d9e2;border-radius:0;min-width:240px;">
						<select id="contacts-order" style="padding:8px;border:1px solid #d6d9e2;border-radius:0;">
							<option value="created_desc">Newest first</option>
							<option value="created_asc">Oldest first</option>
							<option value="name_asc">Name A → Z</option>
							<option value="name_desc">Name Z → A</option>
						</select>
						<button id="contacts-refresh" class="see-all" style="margin-left:auto;">
						<i class="fa-solid fa-rotate"></i> Refresh
						</button>
					</div>
				</div>
				<div id="contacts-list" class="card" style="padding:0;">
				<!-- rows injected by JS -->
				</div>
				<div id="contacts-bulk-actions" style="display:none;position:sticky;bottom:0;background:#fff;border-top:1px solid #e9eaf0;padding:10px;display:flex;gap:12px;justify-content:space-between;align-items:center;">
				  <div>
				    <strong><span id="contacts-selected-count">0</span></strong> selected
				  </div>
				
				  <div style="display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:flex-end;">
					<button id="contacts-bulk-dnc" class="see-all">
					  <i class="fa-solid fa-ban"></i> Do Not Call
					</button>
				    <button id="contacts-bulk-route" class="see-all">
				      <i class="fa-solid fa-route"></i> Route
				    </button>
				    <button id="contacts-bulk-quote" class="see-all">
				      <i class="fa-solid fa-file-invoice-dollar"></i> Quote
				    </button>
				    <button id="contacts-bulk-schedule" class="see-all">
				      <i class="fa-solid fa-calendar-check"></i> Schedule
				    </button>
				
				    <button id="contacts-bulk-save" class="see-all">
				      <i class="fa-solid fa-download"></i> Save selected to phone (.vcf)
				    </button>
				  </div>
				</div>
				<div id="contact-detail-modal" class="overlay" aria-hidden="true">
					<div class="overlay-backdrop" data-close></div>
					<div class="overlay-panel">
						<div class="overlay-header">
							<h2 id="contact-modal-name">Contact</h2>
							<button class="overlay-close" data-close>&times;</button>
						</div>
						<div class="overlay-body" id="contact-modal-body"><!-- injected --></div>
					</div>
				</div>
			</section>

			<!--Lead Viewer-->
			<section id="lead-viewer-section" class="lead-section" style="display:block;">
				<h3>View Leads</h3>
				<div class="card" style="margin-bottom:12px;display:flex;align-items:center;gap:12px;flex-wrap:wrap;">
				  <label style="display:flex;align-items:center;gap:8px;">
				    <input type="checkbox" id="select-all"> Select All
				  </label>
				
				  <!-- Bulk actions (hidden until selection) -->
				  <button id="agent-archive-btn" class="see-all btn btn--primary" title="Archive selected" style="display:none;">
				    <i class="fa-solid fa-box-archive"></i> Archive Selected
				  </button>
				
				  <div id="agent-export-wrap" style="position:relative;display:none;">
				    <button id="agent-export-btn" class="see-all btn btn--primary" type="button" title="Export selected">
				      <i class="fa-solid fa-file-export"></i> Export
				      <i class="fa-solid fa-chevron-down" style="margin-left:6px;"></i>
				    </button>
				
				    <div id="agent-export-menu"
				         style="display:none;position:absolute;top:calc(100% + 6px);left:0;min-width:160px;background:#fff;border:1px solid #d6d9e2;box-shadow:0 10px 24px rgba(0,0,0,.08);z-index:50;">
				      <button type="button" class="see-all" data-export="pdf" style="width:100%;text-align:left;border:none;border-bottom:1px solid #eef0f6;">
				        <i class="fa-solid fa-file-pdf"></i> PDF
				      </button>
				      <button type="button" class="see-all" data-export="csv" style="width:100%;text-align:left;border:none;border-bottom:1px solid #eef0f6;">
				        <i class="fa-solid fa-file-csv"></i> CSV
				      </button>
				      <button type="button" class="see-all" data-export="print" style="width:100%;text-align:left;border:none;">
				        <i class="fa-solid fa-print"></i> Print
				      </button>
				    </div>
				  </div>
				
				  <div style="margin-left:auto;display:flex;gap:8px;align-items:center;">
				    <button id="agent-prev-page" class="see-all">Prev</button>
				    <span id="agent-current-page">Page 1</span>
				    <button id="agent-next-page" class="see-all">Next</button>
				  </div>
				</div>
				<div class="card" style="padding:0;overflow:auto;">
					<table id="agent-leads-table" style="width:100%;border-collapse:collapse;">
						<thead>
							<tr>
								<th style="width:36px;"><!-- master checkbox lives above in toolbar --></th>
								<th style="width:44px;">DNC</th>
								<th>Date</th>
								<th>Agent</th>
								<th>First</th>
								<th>Last</th>
								<th>Age</th>
								<th>Phone(s)</th>
								<th>Address</th>
								<th>City</th>
								<th>State</th>
								<th>ZIP</th>
								<th>Lead Type</th>
								<th>Product</th>
								<th>Notes</th>
							</tr>
						</thead>
						<tbody><!-- populated by JS --></tbody>
					</table>
				</div>
			</section>

			<!--Submit Lead Section-->
			<section id="submit-lead-section" class="lead-section" style="display:none;">
				<h3>Submit a Lead</h3>
				<div class="card">
					<form id="lead-form" class="form">
						<div class="form-grid form-row">
							<div class="field">
								<input id="lead-first" type="text" placeholder=" " required>
								<label for="lead-first">First Name</label>
							</div>
							<div class="field">
								<input id="lead-last" type="text" placeholder=" " required>
								<label for="lead-last">Last Name</label>
							</div>
							<div class="field" style="grid-column: 1 / -1;">
							  <select id="contact-picker">
							    <option value="">New contact (auto-create)</option>
							  </select>
							  <label for="contact-picker">Attach to Contact</label>
							</div>
							<div class="field">
								<input id="lead-age" type="number" placeholder=" " min="0">
								<label for="lead-age">Age</label>
							</div>
							<div class="field">
								<input id="lead-address" type="text" placeholder=" ">
								<label for="lead-address">Street Address</label>
							</div>
							<div class="field">
								<input id="lead-city" type="text" placeholder=" ">
								<label for="lead-city">City</label>
							</div>
							<div class="field">
								<select id="lead-state" required>
									<option value="" disabled>Select a state…</option>
									<option value="AL">Alabama</option>
									<option value="AK">Alaska</option>
									<option value="AZ">Arizona</option>
									<option value="AR">Arkansas</option>
									<option value="CA">California</option>
									<option value="CO">Colorado</option>
									<option value="CT">Connecticut</option>
									<option value="DE">Delaware</option>
									<option value="FL">Florida</option>
									<option value="GA">Georgia</option>
									<option value="HI">Hawaii</option>
									<option value="ID">Idaho</option>
									<option value="IL">Illinois</option>
									<option value="IN">Indiana</option>
									<option value="IA">Iowa</option>
									<option value="KS">Kansas</option>
									<option value="KY">Kentucky</option>
									<option value="LA">Louisiana</option>
									<option value="ME">Maine</option>
									<option value="MD">Maryland</option>
									<option value="MA">Massachusetts</option>
									<option value="MI">Michigan</option>
									<option value="MN">Minnesota</option>
									<option value="MS">Mississippi</option>
									<option value="MO">Missouri</option>
									<option value="MT">Montana</option>
									<option value="NE">Nebraska</option>
									<option value="NV">Nevada</option>
									<option value="NH">New Hampshire</option>
									<option value="NJ">New Jersey</option>
									<option value="NM">New Mexico</option>
									<option value="NY">New York</option>
									<option value="NC">North Carolina</option>
									<option value="ND">North Dakota</option>
									<option value="OH">Ohio</option>
									<option value="OK">Oklahoma</option>
									<option value="OR">Oregon</option>
									<option value="PA">Pennsylvania</option>
									<option value="RI">Rhode Island</option>
									<option value="SC">South Carolina</option>
									<option value="SD">South Dakota</option>
									<option value="TN">Tennessee</option>
									<option value="TX">Texas</option>
									<option value="UT">Utah</option>
									<option value="VT">Vermont</option>
									<option value="VA">Virginia</option>
									<option value="WA">Washington</option>
									<option value="WV">West Virginia</option>
									<option value="WI">Wisconsin</option>
									<option value="WY">Wyoming</option>
								</select>
								<label for="lead-state">State</label>
							</div>
							<div class="field">
								<input id="lead-zip" type="text" placeholder=" " inputmode="numeric" maxlength="10">
								<label for="lead-zip">ZIP</label>
							</div>
							<div class="field">
								<select id="lead-product-type">
									<option value="" disabled selected hidden></option>
									<option value="life">Life</option>
									<option value="health">Health</option>
									<option value="property">Property</option>
									<option value="casualty">Casualty</option>
								</select>
								<label for="lead-product-type">Product Type</label>
							</div>
						<div class="form-grid form-row" id="phone-list"><!-- JS injects fields here --></div>
						<button type="button" id="add-phone" class="btn" style="margin-top:6px;">
							<i class="fa-solid fa-plus"></i>
						</button>
							<div class="field" style="grid-column: 1 / -1;">
								<textarea id="lead-notes" placeholder=" " rows="4"></textarea>
								<label for="lead-notes">Notes</label>
							</div>
						</div>
						<button type="submit" class="btn btn--primary" style="margin-top:12px;">Submit Lead</button>
						<p id="lead-message" style="margin-top:8px;"></p>
					</form>
				</div>
			</section>

			<!--Request Leads Section-->
			<section id="request-leads-section" class="lead-section" style="display:none;">
				<h3>Request Leads</h3>
				<div class="card">
					<form id="lead-request-form" class="form">
						<div class="form-grid">
							<div class="field">
								<input id="request-city" type="text" placeholder=" ">
								<label for="request-city">City</label>
							</div>
							<div class="field">
								<select id="request-state" required>
									<option value="" disabled selected hidden></option>
									<option value="AL">Alabama</option>
									<option value="AK">Alaska</option>
									<option value="AZ">Arizona</option>
									<option value="AR">Arkansas</option>
									<option value="CA">California</option>
									<option value="CO">Colorado</option>
									<option value="CT">Connecticut</option>
									<option value="DE">Delaware</option>
									<option value="FL">Florida</option>
									<option value="GA">Georgia</option>
									<option value="HI">Hawaii</option>
									<option value="ID">Idaho</option>
									<option value="IL">Illinois</option>
									<option value="IN">Indiana</option>
									<option value="IA">Iowa</option>
									<option value="KS">Kansas</option>
									<option value="KY">Kentucky</option>
									<option value="LA">Louisiana</option>
									<option value="ME">Maine</option>
									<option value="MD">Maryland</option>
									<option value="MA">Massachusetts</option>
									<option value="MI">Michigan</option>
									<option value="MN">Minnesota</option>
									<option value="MS">Mississippi</option>
									<option value="MO">Missouri</option>
									<option value="MT">Montana</option>
									<option value="NE">Nebraska</option>
									<option value="NV">Nevada</option>
									<option value="NH">New Hampshire</option>
									<option value="NJ">New Jersey</option>
									<option value="NM">New Mexico</option>
									<option value="NY">New York</option>
									<option value="NC">North Carolina</option>
									<option value="ND">North Dakota</option>
									<option value="OH">Ohio</option>
									<option value="OK">Oklahoma</option>
									<option value="OR">Oregon</option>
									<option value="PA">Pennsylvania</option>
									<option value="RI">Rhode Island</option>
									<option value="SC">South Carolina</option>
									<option value="SD">South Dakota</option>
									<option value="TN">Tennessee</option>
									<option value="TX">Texas</option>
									<option value="UT">Utah</option>
									<option value="VT">Vermont</option>
									<option value="VA">Virginia</option>
									<option value="WA">Washington</option>
									<option value="WV">West Virginia</option>
									<option value="WI">Wisconsin</option>
									<option value="WY">Wyoming</option>
								</select>
								<label for="request-state">State</label>
							</div>
							<div class="field">
								<input id="request-zip" type="text" placeholder=" ">
								<label for="request-zip">ZIP</label>
							</div>
							<div class="field">
								<input id="request-qty" type="number" min="1" value="10" placeholder=" ">
								<label for="request-count">Quantity</label>
							</div>
							<div class="field" style="grid-column: 1 / -1;">
								<textarea id="request-notes" rows="4" placeholder=" "></textarea>
								<label for="request-notes">Notes</label>
							</div>
						</div>
						<button type="submit" class="btn btn--primary" style="margin-top:12px;">Submit Request</button>
						<p id="request-message" style="margin-top:8px;"></p>
					</form>
				</div>
			</section>
			<section id="dnc-list-section" class="lead-section" style="display:none;">
			  <h3>National DNC List</h3>
			
			  <div class="card">
			    <div style="display:flex;gap:10px;flex-wrap:wrap;align-items:flex-end;">
			      <div class="field" style="min-width:260px;flex:1;">
			        <select id="dnc-area-code">
			          <option value="" disabled selected hidden></option>
			        </select>
			        <label for="dnc-area-code">Area Code (only what we have)</label>
			      </div>
			
			      <div class="field" style="min-width:220px;flex:1;">
			        <input id="dnc-local7" type="text" inputmode="numeric" maxlength="7" placeholder=" ">
			        <label for="dnc-local7">Last 7 digits</label>
			      </div>
			
			      <button id="dnc-check-btn" class="btn btn--primary" type="button" style="height:44px;">
			        <i class="fa-solid fa-magnifying-glass"></i> Check
			      </button>
			    </div>
			
			    <div style="margin-top:12px;">
			      <div id="dnc-result" style="display:none;align-items:center;gap:10px;padding:12px;border:1px solid #e9eaf0;background:#fff;">
			        <span id="dnc-dot" style="width:14px;height:14px;border-radius:999px;display:inline-block;border:1px solid rgba(255,255,255,.25);"></span>
			        <div>
			          <div id="dnc-result-title" style="font-weight:800;color:var(--indigo);">Ready</div>
			          <div id="dnc-result-sub" style="font-size:13px;opacity:.8;">Select an area code and enter 7 digits.</div>
			        </div>
			      </div>
			
			      <p id="dnc-msg" style="margin-top:10px;"></p>
			    </div>
			  </div>
			</section>
		</main>
		
		<!-- Footer -->
		<footer class="index-grid-footer">
			<img id="footerlogo" src="Pics/img17.png">
			<hr class="footerhr">
			<div id="footercontact">
				<a class="contactcontainer" href="mailto:info@familyvaluesgroup.com">
					<span class="fa fa-envelope"></span>
					<span class="contactcontcontacts">info@familyvaluesgroup.com</span>
				</a>
				<p> | </p>
				<a class="contactcontainer" href="tel:+16292437980">
					<span class="fa fa-phone"></span>
					<span class="contactcontcontacts">+1-629-243-7980</span>
				</a>
			</div>
			<hr class="footerhr">
			<div id="footersocial">
				<a class="fab fa-facebook-f" href="https://www.facebook.com/familyvaluesgroup"></a>
				<a class="fab fa-linkedin-in" href="https://www.linkedin.com/in/demisi-johnson-026227391?utm_source=share&utm_campaign=share_via&utm_content=profile&utm_medium=ios_app"></a>
				<a class="fab fa-instagram" href="https://www.instagram.com/family.values.group?igsh=OHl3dGdnd3RwMTV0&utm_source=qr"></a>
				<a class="fab fa-youtube" href="https://youtube.com/@familyvaluesgroup?si=mauqWp5nxyczgCJd"></a>
				<a class="fab fa-google" href="https://g.page/r/CXUiEg9T9xHSEAE/review"></a>
			</div>
			<div id="footerlinks">
				<a href="faqs.html">FAQs</a>
				<a href="terms.html">Terms</a>
				<a href="accessibility.html">Accessibility</a>
				<a href="privacy.html">Privacy</a>
			</div>
			<p><em>© 2025 Family Values Group. All Rights Reserved.</em></p>
		</footer>
		<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.js"></script>
		<script src="scripts/supabase-client.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/choices.js/public/assets/scripts/choices.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <script src="scripts/leads.js"></script>
		<script src="scripts/general.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
		<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
	</body>
</html>
