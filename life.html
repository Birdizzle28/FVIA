<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- Reuse your existing styles -->
  <link rel="stylesheet" href="styles/general.css" />
  <link rel="stylesheet" href="styles/freequote.css" />
  <link href="https://fonts.googleapis.com/css?family=Bellota+Text" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />

  <!-- (Optional) if your header uses this -->
  <script type="module" src="scripts/general.js"></script>

  <!-- Supabase client -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <!-- FV Group config (REQUIRED: replace with your real values) -->
  <script>
    // üîß TODO: paste your real values
    window.FVG_SUPABASE_URL  = "https://ddlbgkolnayqrxslzsxn.supabase.co";
    window.FVG_SUPABASE_ANON = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRkbGJna29sbmF5cXJ4c2x6c3huIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDg4Mjg0OTQsImV4cCI6MjA2NDQwNDQ5NH0.-L0N2cuh0g-6ymDyClQbM8aAuldMQzOb3SXV5TDT5Ho";

    // A fixed UUID for ‚ÄúWebsite Lead‚Äù submitter (generate once in SQL: select gen_random_uuid();)
    window.FVG_WEBSITE_SUBMITTER_ID   = "00000000-0000-0000-0000-000000000000";
    window.FVG_WEBSITE_SUBMITTER_NAME = "Website Lead";

    // Scheduler placeholders (leave blank for now; we‚Äôll wire later)
    window.FVG_SCHEDULER_URL  = "";     // e.g., "https://calendly.com/fvg/intro"
    window.FVG_SCHEDULER_OPEN = null;   // or a function to open your own modal
  </script>

  <!-- Page script -->
  <script type="module" src="scripts/life.js"></script>

  <title>Life Insurance | Family Values Group</title>
</head>
<body id="indexbody">
  <!-- Header (kept consistent with your site) -->
  <header class="index-grid-header">
    <a href="index.html"><img id="headerlogo" src="Pics/img6.png" alt="Family Values Group" /></a>
    <p><strong>Family Values Group</strong></p>
    <button id="menu-toggle" aria-label="Toggle menu"><i class="fas fa-bars"></i></button>
    <hr />
    <nav class="header-flex-container">
      <a href="about.html">About</a>
      <a href="contact.html">Support</a>
      <a href="index.html">Home</a>
      <a href="careers.html">Careers</a>
      <a href="login.html">Login</a>
    </nav>
    <hr />
  </header>

  <div id="mobile-menu">
    <a href="about.html">About</a>
    <a href="contact.html">Support</a>
    <a href="index.html" id="active-nav">Home</a>
    <a href="careers.html">Careers</a>
    <a href="login.html">Login</a>
  </div>

  <main class="auth-container">
    <section id="free-quote-form">
      <h2 id="quote-heading">Life Insurance</h2>

      <!-- HYBRID FLOW -->
      <form id="life-form" novalidate>
        <!-- STAGE 1: Short Form -->
        <section class="panel active" id="panel-short">
          <label>First Name:
            <input type="text" name="first_name" required />
            <small class="fv-error" data-err="first_name"></small>
          </label>

          <label>Last Name:
            <input type="text" name="last_name" required />
            <small class="fv-error" data-err="first_name"></small>
          </label>

          <label>Mobile Number:
            <input type="tel" name="phone" inputmode="tel" required />
            <small class="fv-error" data-err="first_name"></small>
          </label>

          <label>Email:
            <input type="email" name="email" required />
            <small class="fv-error" data-err="first_name"></small>
          </label>

          <label>ZIP:
            <input type="text" name="zip" inputmode="numeric" pattern="\\d{5}" maxlength="5" required />
            <small class="fv-error" data-err="first_name"></small>
          </label>

          <!-- Hidden fields for your schema -->
          <input type="hidden" name="lead_type" value="Web" />
          <input type="hidden" name="product_type" value="life" />
          <input type="hidden" name="lat" id="lat" />
          <input type="hidden" name="lng" id="lng" />

          <!-- TCPA -->
          <div style="margin:.75rem 0;">
            <label class="tcpa-inline">
              <input type="checkbox" id="tcpa" required />
              <span>
                By clicking Submit, you agree FV Group may contact you at the number and email provided
                (including autodialed/automated texts or calls and prerecorded messages) about insurance
                products or services. Consent isn‚Äôt required to purchase. Message/data rates may apply.
                Reply STOP to opt out.
              </span>
            </label>
          </div>

          <div class="panel-nav">
            <button type="button" id="btn-next" disabled>Next</button>
          </div>
        </section>

        <!-- STAGE 2: Instant Qualify -->
        <section class="panel" id="panel-qualify" style="display:none;">
          <h4>Quick Confirm</h4>
          <hr />
          <label>Confirm Mobile Number:
            <input type="tel" name="confirm_phone" id="confirm_phone" required />
          </label>

          <label>When should we call?
            <select id="call_timing" required>
              <option value="now">Right now</option>
              <option value="15m">In ~15 minutes</option>
              <option value="book">Pick a time</option> <!-- stays visible now -->
            </select>
          </label>

          <fieldset style="border:none; margin-top:.5rem;">
            <legend>Smoker?</legend>
            <label style="display:inline-flex; gap:.5rem; align-items:center; margin-right:1rem;">
              <input type="radio" name="smoker" value="no" checked /> No
            </label>
            <label style="display:inline-flex; gap:.5rem; align-items:center;">
              <input type="radio" name="smoker" value="yes" /> Yes
            </label>
          </fieldset>

          <div class="panel-nav">
            <button type="button" data-back>Back</button>
            <button type="button" id="btn-submit">Submit</button>
          </div>
        </section>

        <!-- STAGE 3: Result / Thank-You -->
        <section id="result-screen" style="display:none;">
          <h3 id="result-title"></h3>
          <p id="result-body"></p>

          <div id="result-actions" class="panel-nav" style="margin-top:.75rem;"></div>

          <!-- Referrals -->
          <div id="referrals" style="margin-top:1rem; display:none;">
            <h4>Refer a friend/family (optional)</h4>
            <div id="ref-list"></div>
            <div class="panel-nav" style="gap:.5rem; margin-top:.5rem;">
              <button type="button" id="ref-add" class="icon-btn" title="Add another">
                <i class="fa-solid fa-circle-plus"></i> Add another
              </button>
              <button type="button" id="ref-submit" class="icon-btn" title="Submit referrals">
                <i class="fa-solid fa-paper-plane"></i> Submit referrals
              </button>
            </div>
            <p id="ref-msg" class="small" style="margin-top:.35rem;"></p>
          </div>

          <div class="tiny-links" style="text-align:center; margin-top:.75rem; font-size:.9em;">
            <a href="index.html">Back to Home</a> ¬∑
            <a href="affiliations.html">Our Affiliations</a>
          </div>
        </section>
      </form>
    </section>
  </main>

  <!-- Footer -->
  <footer class="index-grid-footer">
    <img id="footerlogo" src="Pics/img6.png" alt="" />
    <hr class="footerhr" />
    <div id="footercontact">
      <a class="contactcontainer" href="mailto:fvinsuranceagency@gmail.com">
        <span class="fa fa-envelope"></span>
        <span class="contactcontcontacts">fvinsuranceagency@gmail.com</span>
      </a>
      <p> | </p>
      <a class="contactcontainer" href="tel:+17316934739">
        <span class="fa fa-phone"></span>
        <span class="contactcontcontacts">(731) 693-4739</span>
      </a>
    </div>
    <hr class="footerhr" />
    <div id="footersocial">
      <a class="fab fa-facebook-f" href="#"></a>
      <a class="fab fa-linkedin-in" href="#"></a>
      <a class="fab fa-instagram" href="#"></a>
      <a class="fab fa-youtube" href="#"></a>
      <a class="fab fa-google" href="#"></a>
    </div>
    <p><em>¬© 2025 Family Values Group. All Rights Reserved.</em></p>
  </footer>
</body>
</html>
